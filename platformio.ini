; PlatformIO Configuration for Captured Portal
; https://docs.platformio.org/page/projectconf.html

[env]
platform = espressif32
framework = arduino
monitor_speed = 115200
monitor_raw = yes
lib_deps =
    bodmer/TFT_eSPI@^2.5.43
    bblanchon/ArduinoJson@^7.0.0
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1

build_flags =
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc

; ==========================================
; LILYGO T-Display S3 (Recommended)
; ==========================================
[env:lilygo-t-display-s3]
board = lilygo-t-display-s3
build_flags =
    ${env.build_flags}
    -DLILYGO_T_DISPLAY_S3
    -DUSER_SETUP_LOADED
    -DST7789_DRIVER
    -DTFT_WIDTH=170
    -DTFT_HEIGHT=320
    -DTFT_MOSI=11
    -DTFT_SCLK=12
    -DTFT_CS=6
    -DTFT_DC=7
    -DTFT_RST=5
    -DTFT_BL=38
    -DTOUCH_CS=-1
    -DLOAD_GLCD
    -DLOAD_FONT2
    -DLOAD_FONT4
    -DLOAD_FONT6
    -DLOAD_FONT7
    -DLOAD_FONT8
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000

; ==========================================
; Waveshare ESP32-S3 LCD 1.47 (USB Dongle)
; ==========================================
[env:waveshare-esp32s3-lcd147]
board = esp32-s3-devkitc-1
build_flags =
    ${env.build_flags}
    -DWAVESHARE_LCD_147
    -DUSER_SETUP_LOADED
    -DST7789_DRIVER
    -DTFT_WIDTH=172
    -DTFT_HEIGHT=320
    -DTFT_MOSI=6
    -DTFT_SCLK=4
    -DTFT_CS=14
    -DTFT_DC=8
    -DTFT_RST=9
    -DTFT_BL=5
    -DTOUCH_CS=-1
    -DLOAD_GLCD
    -DLOAD_FONT2
    -DLOAD_FONT4
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000

; ==========================================
; ESP32-S3 1.28" Round LCD
; ==========================================
[env:esp32s3-round-128]
board = esp32-s3-devkitc-1
build_flags =
    ${env.build_flags}
    -DESP32S3_ROUND_128
    -DUSER_SETUP_LOADED
    -DGC9A01_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_MOSI=11
    -DTFT_SCLK=10
    -DTFT_CS=9
    -DTFT_DC=8
    -DTFT_RST=14
    -DTFT_BL=2
    -DTOUCH_CS=-1
    -DLOAD_GLCD
    -DLOAD_FONT2
    -DLOAD_FONT4
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000

; =================================22=========
; Waveshare ESP32-S3 Touch LCD 1.69
; ==========================================
[env:waveshare-esp32s3-touch-169]
board = esp32-s3-devkitc-1
build_flags =
    ${env.build_flags}
    -DWAVESHARE_TOUCH_169
    -DUSER_SETUP_LOADED
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=280
    -DTFT_MOSI=7
    -DTFT_SCLK=6
    -DTFT_CS=14
    -DTFT_DC=8
    -DTFT_RST=9
    -DTFT_BL=15
    -DTOUCH_CS=16
    -DLOAD_GLCD
    -DLOAD_FONT2
    -DLOAD_FONT4
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000
lib_deps =
    ${env.lib_deps}
    lovyan03/LovyanGFX@^1.1.12

; ==========================================
; LILYGO T-Deck (Keyboard + Trackball)
; ==========================================
[env:lilygo-t-deck]
board = esp32-s3-devkitc-1
board_build.arduino.memory_type = qio_opi
board_build.psram_type = opi
board_upload.flash_size = 16MB
board_build.partitions = default_16MB.csv
build_flags =
    ${env.build_flags}
    -DLILYGO_T_DECK
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DUSER_SETUP_LOADED
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=320
    ; Use HSPI for T-Deck display
    -DUSE_HSPI_PORT
    -DTFT_MOSI=41
    -DTFT_MISO=38
    -DTFT_SCLK=40
    -DTFT_CS=12
    -DTFT_DC=11
    -DTFT_RST=-1
    -DTFT_BL=42
    -DTOUCH_CS=-1
    -DLOAD_GLCD
    -DLOAD_FONT2
    -DLOAD_FONT4
    -DLOAD_FONT6
    -DLOAD_FONT7
    -DLOAD_FONT8
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=40000000
    -DSPI_READ_FREQUENCY=20000000
    ; T-Deck specific pins
    -DTDECK_KEYBOARD=1
    -DTDECK_TRACKBALL=1
    -DTDECK_PERI_POWERON=10
    -DTDECK_KEYBOARD_INT=46
    -DTDECK_KEYBOARD_ADDR=0x55
    -DTDECK_TRACKBALL_UP=3
    -DTDECK_TRACKBALL_DOWN=15
    -DTDECK_TRACKBALL_LEFT=1
    -DTDECK_TRACKBALL_RIGHT=2
    -DTDECK_TRACKBALL_CLICK=0
    -DTDECK_SDCARD_CS=39
    -DTDECK_SPEAKER=2
    -DTDECK_MIC=14
    -DTDECK_BATTERY_ADC=4
lib_deps =
    ${env.lib_deps}
    Wire
